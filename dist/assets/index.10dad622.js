import{s as t,m as e,a,l as i,i as r,j as s,f as l,e as n,z as o,o as d,c as h,b as c,d as u,g as p,p as g,h as y,t as m,F as C,r as v,w as x,k as _,n as f,q as b,u as A,v as w,x as V,y as S,A as $}from"./vendor.90d971c6.js";const k={props:{selectedCountries:Array,allowedCountries:Array,highlightedCountry:String,xAxisVariable:String,data:Array},mounted(){this.tooltip=t("body").append("div").attr("class","country-tooltip").style("display","none"),this.renderMap()},methods:{renderMap(){var d=(window.innerWidth+300)/3,h=e().center([0,0]).scale(120).rotate([0,0]),c=t(this.$refs["world-map"]).html("").attr("width",d).attr("height",400),u=a(this.data,(t=>t[this.xAxisVariable]))||0,p=i().domain([0,u]).range(["#f9f9f9","#850037"]),g=r().projection(h),y=c.append("g");s("./assets/worldMap.dcec06fa.json").then((t=>{y.selectAll("path").data(l(t,t.objects.countries).features).enter().append("path").attr("d",g).attr("class","country-path").attr("fill",(t=>{const e=this.data.find((e=>e.id===t.properties.id));return void 0===e||void 0===e[this.xAxisVariable]?"#ccc":p(e[this.xAxisVariable])})).style("cursor","pointer").attr("id",(t=>t.properties.id)).attr("highlight",(t=>this.highlightedCountry===t.properties.id?"true":"false")).attr("active",(t=>this.selectedCountries.includes(t.properties.id)?"true":"false")).on("click",(t=>{this.allowedCountries.includes(t.properties.id)&&this.$emit("clickCountry",t.properties.id)})).on("mouseenter",(t=>{if(!this.allowedCountries.includes(t.properties.id))return;this.$emit("mouseenterCountry",t.properties.id);const e=this.data.find((e=>e.id===t.properties.id)),a=void 0!==e?(e[this.xAxisVariable]||0).toFixed(2):"";this.tooltip.style("display","block").html(`<div>\n                ${t.properties.admin}\n                <div>\n                ${this.xAxisVariable}: ${a}\n                </div>\n              </div>`).style("left",n.pageX+10+"px").style("top",n.pageY-30+"px")})).on("mouseleave",(()=>{this.$emit("mouseleaveCountry"),this.tooltip.style("display","none").style("left","0px").style("top","0px")}))}));var m=o().scaleExtent([1,5]).on("zoom",(function(){y.attr("transform",n.transform)}));c.call(m)}},watch:{xAxisVariable(t){this.renderMap()},selectedCountries(e){var a=t(this.$refs["world-map"]);a.selectAll("path[active='true']").attr("active","false"),e.forEach((t=>{a.select("#"+t).attr("active","true")}))},highlightedCountry(e){var a=t(this.$refs["world-map"]);a.selectAll("path[highlight='true']").attr("highlight","false"),""!==e&&a.select("#"+e).attr("highlight","true").raise()}}},M=c("div",{class:"text-center"},"Click on the country to select.",-1),G=c("div",{class:"text-center"}," The selected countries highlight the scatter plot and filter the bar chart and line charts. ",-1),P={ref:"world-map"};k.render=function(t,e,a,i,r,s){return d(),h("div",null,[M,G,(d(),h("svg",P,null,512))])};const L={props:{selectedCountries:Array,highlightedCountry:String,xAxisVariable:String,yAxisVariable:String,data:Array},mounted(){this.tooltip=t("body").append("div").attr("class","country-tooltip").style("display","none"),this.renderPlot()},methods:{renderPlot(){var e=(window.innerWidth+300)/4,r=400,s=t(this.$refs["scatter-plot"]).html("").attr("width",e).attr("height",r),l=a(this.data,(t=>t[this.xAxisVariable]))||0,o=a(this.data,(t=>t[this.yAxisVariable]))||0,d=i().domain([0,l]).range([80,e-10]),h=i().domain([0,o]).range([350,10]),c=u().scale(d).ticks(6),g=p().scale(h).ticks(6);s.append("g").selectAll("circle").data(this.data).enter().append("circle").attr("cx",(t=>d(t[this.xAxisVariable]||0))).attr("cy",(t=>h(t[this.yAxisVariable]||0))).attr("r",4).attr("id",(t=>t.id)).attr("fill","none").attr("stroke","green").attr("stroke-width","2px").style("cursor","pointer").attr("class","country-circle").attr("highlight",(t=>this.highlightedCountry===t.id?"true":"false")).attr("active",(t=>this.selectedCountries.includes(t.id)?"true":"false")).on("click",(t=>{this.$emit("clickCountry",t.id)})).on("mouseenter",(t=>{this.$emit("mouseenterCountry",t.id),this.tooltip.style("display","block").html(`<div>\n                ${t.location} \n                <div>\n                ${this.xAxisVariable}: ${t[this.xAxisVariable]||0}\n                </div> \n                <div>\n                ${this.yAxisVariable}: ${t[this.yAxisVariable]||0}\n                </div>\n              </div>`).style("left",n.pageX+10+"px").style("top",n.pageY-5+"px")})).on("mouseleave",(()=>{this.$emit("mouseleaveCountry"),this.tooltip.style("display","none").style("left","0px").style("top","0px")})),s.append("g").attr("class","x axis").attr("transform","translate(0,350)").call(c),s.append("text").attr("x",e/2).attr("y",385).attr("font-size","0.8em").style("text-anchor","middle").text(this.xAxisVariable),s.append("g").attr("class","y axis").attr("transform","translate(80, 0)").call(g),s.append("text").attr("transform","rotate(-90)").attr("y",15).attr("x",-200).attr("font-size","0.8em").style("text-anchor","middle").text(this.yAxisVariable)}},watch:{xAxisVariable(t){this.renderPlot()},yAxisVariable(){this.renderPlot()},selectedCountries(e){var a=t(this.$refs["scatter-plot"]);a.selectAll(".country-circle[active='true']").attr("active","false"),e.forEach((t=>{a.select("#"+t).attr("active","true")}))},highlightedCountry(e){var a=t(this.$refs["scatter-plot"]);a.selectAll(".country-circle[highlight='true']").attr("highlight","false"),""!==e&&a.select("#"+e).attr("highlight","true").raise()}}},j=c("div",{class:"message"}," Risk factors and development indicators according to the countries ",-1),E={ref:"scatter-plot"};L.render=function(t,e,a,i,r,s){return d(),h("div",null,[j,(d(),h("svg",E,null,512))])};const D={props:{initial:String,columns:Array,message:String},methods:{onChange(t){this.$emit("selected",t.target.value)}}},W=x();g("data-v-566e1379");const Y={class:"container"},z={class:"message"};y();const F=W(((t,e,a,i,r,s)=>(d(),h("div",Y,[c("div",z,m(a.message),1),c("select",{onChange:e[1]||(e[1]=(...t)=>s.onChange&&s.onChange(...t)),value:a.initial},[(d(!0),h(C,null,v(a.columns,(t=>(d(),h("option",{key:t,value:t},m(t),9,["value"])))),128))],40,["value"])]))));D.render=F,D.__scopeId="data-v-566e1379";const X={props:{selectedCountries:Array,highlightedCountry:String,yAxisVariable:String,data:Array},mounted(){this.tooltip=t("body").append("div").attr("class","country-tooltip").style("display","none"),this.renderGraph()},methods:{renderGraph(){var e=window.innerWidth/2,a=t(this.$refs["line-graph"]).html("").attr("width",e).attr("height",400),r=this.data.filter((t=>this.selectedCountries.includes(t.id)));let s=new Date,l=new Date(0),o=1/0,d=-1/0;r.forEach((t=>{t.data.forEach((t=>{var e=new Date(t.date);e<s&&(s=e),e>l&&(l=e);var a=t[this.yAxisVariable];a<o&&(o=a),a>d&&(d=a)}))}));var h=_().domain([s,l]).range([80,e-10]),c=i().domain([o,d]).range([350,10]),g=f("%b-%Y"),y=u().scale(h).tickFormat((t=>g(t))),m=p().scale(c).ticks(6),C=b().x((t=>h(new Date(t.date)))).y((t=>c(t[this.yAxisVariable]))),v=r.map((t=>({data:C(t.data.filter((t=>void 0!==t.date&&void 0!==t[this.yAxisVariable]))),id:t.id,location:t.location})));a.append("g").selectAll("path").data(v).enter().append("path").attr("class","country-line").attr("id",(t=>t.id)).attr("d",(t=>t.data)).attr("highlight",(t=>this.highlightedCountry===t.id?"true":"false")).on("mouseenter",(t=>{this.$emit("mouseenterCountry",t.id),this.tooltip.style("display","block").html(t.location).style("left",n.pageX+10+"px").style("top",n.pageY-5+"px")})).on("mouseleave",(()=>{this.$emit("mouseleaveCountry"),this.tooltip.style("display","none").style("left","0px").style("top","0px")})),a.append("g").attr("class","x axis").attr("transform","translate(0,350)").call(y).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"),a.append("g").attr("class","y axis").attr("transform","translate(80, 0)").call(m)}},watch:{selectedCountries(){this.renderGraph()},yAxisVariable(){this.renderGraph()},highlightedCountry(e){var a=t(this.$refs["line-graph"]);a.selectAll(".country-line[highlight='true']").attr("highlight","false"),""!==e&&a.select("#"+e).attr("highlight","true").raise()}}},I=c("div",{class:"text-center"}," The time based covid-19 statistics ",-1),O={ref:"line-graph"};X.render=function(t,e,a,i,r,s){return d(),h("div",null,[I,(d(),h("svg",O,null,512))])};const T={props:{selectedCountries:Array,highlightedCountry:String,yAxisVariable:String,data:Array},mounted(){this.tooltip=t("body").append("div").attr("class","country-tooltip").style("display","none"),this.renderGraph()},methods:{renderGraph(){var e=(window.innerWidth+300)/4,r=400,s=t(this.$refs["bar-chart"]).html("").attr("width",e).attr("height",r),l=this.data.filter((t=>this.selectedCountries.includes(t.id))),o=[];l.forEach((t=>{const e=t.id,i=t.location,r=a(t.data,(t=>t[this.yAxisVariable]))||0;o.push({id:e,name:i,value:r})})),o=o.sort(((t,e)=>e.value-t.value));var d=a(o,(t=>t.value)),h=A().domain(o.map((t=>t.id))).range([80,e-10]).padding(.2),c=i().domain([0,d]).range([350,10]),g=u().scale(h).tickFormat((t=>o.find((e=>e.id===t)).name)),y=p().scale(c).ticks(6);s.append("g").selectAll("path").data(o).enter().append("rect").attr("class","country-bar").attr("id",(t=>t.id)).attr("x",(t=>h(t.id))).attr("y",(t=>c(t.value))).attr("width",h.bandwidth()).attr("height",(t=>350-c(t.value))).attr("highlight",(t=>this.highlightedCountry===t.id?"true":"false")).on("mouseenter",(t=>{this.$emit("mouseenterCountry",t.id),this.tooltip.style("display","block").html(`<div>\n                ${t.name}\n                <div>\n                max_${this.yAxisVariable}: ${t.value}\n                </div>\n              </div>`).style("left",n.pageX+10+"px").style("top",n.pageY-5+"px")})).on("mouseleave",(()=>{this.$emit("mouseleaveCountry"),this.tooltip.style("display","none").style("left","0px").style("top","0px")})),s.append("g").attr("class","x axis").attr("transform","translate(0,350)").call(g),s.append("g").attr("class","y axis").attr("transform","translate(80, 0)").call(y)}},watch:{selectedCountries(){this.renderGraph()},yAxisVariable(){this.renderGraph()},highlightedCountry(e){var a=t(this.$refs["bar-chart"]);a.selectAll(".country-bar[highlight='true']").attr("highlight","false"),""!==e&&a.select("#"+e).attr("highlight","true").raise()}}},q=c("div",{class:"message"}," Current numbers number of vaccination statistics (shows maximum values in the data are shown) ",-1),B={ref:"bar-chart"};T.render=function(t,e,a,i,r,s){return d(),h("div",null,[q,(d(),h("svg",B,null,512))])};const R={components:{WorldMap:k,ScatterPlot:L,ColumnsDropdown:D,LineGraph:X,BarChart:T},data:()=>({data:[],allowedCountries:[],dataLoaded:!1,selectedCountries:[],highlightedCountry:"",xAxisScatterPlot:"population",yAxisScatterPlot:"gdp_per_capita",firstLineGraph:"new_vaccinations",secondLineGraph:"people_vaccinated",barGraph:"people_vaccinated",columns:["population_density","median_age","aged_65_older","aged_70_older","gdp_per_capita","extreme_poverty","human_development_index","life_expectancy","cardiovasc_death_rate","diabetes_prevalence","female_smokers","male_smokers","handwashing_facilities","hospital_beds_per_thousand","population"],timebasedColumns:["new_vaccinations","new_vaccinations_smoothed","new_vaccinations_smoothed_per_million","people_fully_vaccinated","people_fully_vaccinated_per_hundred","people_vaccinated","people_vaccinated_per_hundred","total_vaccinations_per_hundred","new_tests","total_tests","total_tests_per_thousand","new_tests_per_thousand","new_tests_smoothed","new_tests_smoothed_per_thousand","total_cases","new_cases","new_cases_smoothed","total_deaths","new_deaths","new_deaths_smoothed","total_cases_per_million","new_cases_per_million","new_cases_smoothed_per_million","total_deaths_per_million","new_deaths_per_million","new_deaths_smoothed_per_million"],barChartColumns:["people_fully_vaccinated","people_fully_vaccinated_per_hundred","people_vaccinated","people_vaccinated_per_hundred","total_vaccinations_per_hundred"]}),created(){fetch("https://covid.ourworldindata.org/data/owid-covid-data.json").then((t=>t.json())).then((t=>{var e=Object.keys(t).filter((t=>!t.includes("OWID")));this.allowedCountries=e;var a=[];e.forEach((e=>{var i=t[e];i.id=e,this.columns.forEach((t=>{void 0===i[t]&&(i[t]=w(i.data,(e=>e[t])))})),a.push(i)})),this.data=a,this.dataLoaded=!0}))},methods:{toggleCountrySelection(t){this.selectedCountries.includes(t)?this.selectedCountries=this.selectedCountries.filter((e=>e!==t)):this.selectedCountries=[...this.selectedCountries,t]},highlightCountry(t){this.highlightedCountry=t},unhighlightCountry(){this.highlightedCountry=""}}},H={class:"center"},J={key:0},K={class:"center"},N={class:"center"},Q={class:"center"};R.render=function(t,e,a,i,r,s){const l=S("columns-dropdown"),n=S("world-map"),o=S("scatter-plot"),u=S("bar-chart"),p=S("line-graph");return d(),h("div",null,[c("div",H,[c(l,{message:"Select variable for x-axis of the scatter plot / Select variable for choropleth map",columns:r.columns,initial:r.xAxisScatterPlot,onSelected:e[1]||(e[1]=t=>r.xAxisScatterPlot=t)},null,8,["columns","initial"]),c(l,{message:"Select variable for y-axis of the scatter plot",columns:r.columns,initial:r.yAxisScatterPlot,onSelected:e[2]||(e[2]=t=>r.yAxisScatterPlot=t)},null,8,["columns","initial"]),c(l,{message:"Select variable for first line graph",columns:r.timebasedColumns,initial:r.firstLineGraph,onSelected:e[3]||(e[3]=t=>r.firstLineGraph=t)},null,8,["columns","initial"]),c(l,{message:"Select variable for second line graph",columns:r.timebasedColumns,initial:r.secondLineGraph,onSelected:e[4]||(e[4]=t=>r.secondLineGraph=t)},null,8,["columns","initial"]),c(l,{message:"Select variable for bar graph",columns:r.barChartColumns,initial:r.barGraph,onSelected:e[5]||(e[5]=t=>r.barGraph=t)},null,8,["columns","initial"])]),r.dataLoaded?(d(),h("div",J,[c("div",K,[c(n,{data:r.data,allowedCountries:r.allowedCountries,selectedCountries:r.selectedCountries,highlightedCountry:r.highlightedCountry,xAxisVariable:r.xAxisScatterPlot,onClickCountry:s.toggleCountrySelection,onMouseenterCountry:s.highlightCountry,onMouseleaveCountry:s.unhighlightCountry},null,8,["data","allowedCountries","selectedCountries","highlightedCountry","xAxisVariable","onClickCountry","onMouseenterCountry","onMouseleaveCountry"])]),c("div",N,[c(o,{data:r.data,selectedCountries:r.selectedCountries,highlightedCountry:r.highlightedCountry,xAxisVariable:r.xAxisScatterPlot,yAxisVariable:r.yAxisScatterPlot,onClickCountry:s.toggleCountrySelection,onMouseenterCountry:s.highlightCountry,onMouseleaveCountry:s.unhighlightCountry},null,8,["data","selectedCountries","highlightedCountry","xAxisVariable","yAxisVariable","onClickCountry","onMouseenterCountry","onMouseleaveCountry"]),c(u,{selectedCountries:r.selectedCountries,highlightedCountry:r.highlightedCountry,yAxisVariable:r.barGraph,data:r.data,onMouseenterCountry:s.highlightCountry,onMouseleaveCountry:s.unhighlightCountry},null,8,["selectedCountries","highlightedCountry","yAxisVariable","data","onMouseenterCountry","onMouseleaveCountry"])]),c("div",Q,[c(p,{selectedCountries:r.selectedCountries,highlightedCountry:r.highlightedCountry,yAxisVariable:r.firstLineGraph,data:r.data,onMouseenterCountry:s.highlightCountry,onMouseleaveCountry:s.unhighlightCountry},null,8,["selectedCountries","highlightedCountry","yAxisVariable","data","onMouseenterCountry","onMouseleaveCountry"]),c(p,{selectedCountries:r.selectedCountries,highlightedCountry:r.highlightedCountry,yAxisVariable:r.secondLineGraph,data:r.data,onMouseenterCountry:s.highlightCountry,onMouseleaveCountry:s.unhighlightCountry},null,8,["selectedCountries","highlightedCountry","yAxisVariable","data","onMouseenterCountry","onMouseleaveCountry"])])])):V("",!0)])},$(R).mount("#app");
